let i = 500
fn madness() {
    let i = 100

    if 1 {
        let i = 0
        if 0 {
            let i = 200
        } else {
            i = i + 10

            fn write() {
                i = i + 1
            }

            i = i + 10
            write()
            write()

            fn read() {
                return fn() {
                    return i
                }
            }
            write()
            return read
        }
    }
}

let x = madness()()()
print("expect 23")
print(x)